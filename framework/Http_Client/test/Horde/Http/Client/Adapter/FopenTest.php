<?php
/**
 * @category   Horde
 * @package    Http_Client
 * @subpackage UnitTests
 * @copyright  2007-2009 The Horde Project (http://www.horde.org/)
 * @license    http://opensource.org/licenses/bsd-license.php
 */

/**
 * @group      support
 * @category   Horde
 * @package    Http_Client
 * @subpackage UnitTests
 * @copyright  2007-2009 The Horde Project (http://www.horde.org/)
 * @license    http://opensource.org/licenses/bsd-license.php
 */
class Horde_Http_Client_Adapter_FopenTest extends PHPUnit_Framework_TestCase
{
    public function testThrowsOnBadUri()
    {
        $client = new Horde_Http_Client(array('adapter' => new Horde_Http_Client_Adapter_Fopen()));
        try {
            $response = $client->get('http://doesntexist.example.com/');
            $this->fail();
        } catch (Horde_Http_Client_Exception $e) {
        }
    }

    public function testReturnsResponseInsteadOfExceptionOn404()
    {
        $client = new Horde_Http_Client(array('adapter' => new Horde_Http_Client_Adapter_Fopen()));
        $response = $client->get('http://example.com/doesntexist');
        $this->assertEquals(404, $response->code);
    }
}
